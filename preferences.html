<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Preferences</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<!-- provide source before web loaded -->
	<link rel="preload" href="css/common.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
	<link rel="preload" href="script/preload.js" as="script">
	<link rel="preload" href="script/postload.js" as="script">
	<!-- set source to web -->
  <noscript>
    <link rel="stylesheet" href="css/common.css">
  </noscript>
	<link rel="stylesheet" href="css/preferences.css">
  <script type="text/javascript" src="script/preload.js"></script>
</head>
<body>
  <noscript><span id="block">Blocked</span></noscript>
	<header>
		<nav role="navigation">
			<a href="index.html" id="nav-head"><h3>AriasaProp</h3></a>
	    <input type="checkbox" id="search-switch" class="hide"/>
			<div id="nav-menu">
				<label id="nav-search-switch" for="search-switch"><i></i></label>
			</div>
			<form>
			  <input name="s" type="text" placeholder="Search" required>
			  <button type="reset"><i>&#xf1f8;</i></button>
			  <button type="submit"><i>&#xe800;</i></button>
			</form>
		</nav>
	</header>
	<main>
		<h1>Preferences</h1>
		<div>
		  <h5>Color</h5>
		  <template>
  		  <input type="radio" name="themeopt" onchange="setColorsVar(this.value)"/>
		  </template>
		</div>
		<div>
		  <h5>Font Size</h5>
		  <p>A</p>
		  <input id="fontSize-pref" value='16' type="range" min="12" max="24" step="2" onchange="setFontSizeVar(this.value)"/>
		  <p>A</p>
		</div>
		<br>
		<h3>Game : </h3>
	</main>
	<footer>
	  <div>
	    <h4>Other</h4>
	    <a href="aboutme.html"><p>About Me</p></a>
	    <a href="updates.html"><p>Updates</p></a>
  	</div>
	  <div>
  		<h4>Author</h4>
  		<a href="mailto:ikomangwidiadaariasa12@gmail.com"><i>&#xe802;</i><p class="hide-on-small">Gmail</p></a>
  		<a href="https://github.com/AriasaProp"><i>&#xe80a;</i><p class="hide-on-small">Github</p></a>
	  </div>
  	<p id="last-update">Update Now</p>
  	<p>Made for fun!</p>
	</footer>
</body>
<script type="text/javascript" src="script/postload.js"></script>
<script type="text/javascript">
const tfz = localStorage.getItem('theme-fontSize');
if(tfz)
  document.getElementById('fontSize-pref').value = tfz;

function setColorsVar(key) {
  if(localStorage.getItem('theme-colors') !== key) {
    localStorage.setItem('theme-colors', key);
    updateColors();
  }
}
function setFontSizeVar(key) {
  if(localStorage.getItem('theme-fontSize') !== key) {
    localStorage.setItem('theme-fontSize', key);
    updateFontSize();
  }
}
fetch("./data/themes.json").then(response => response.json())
.then(themeData => {
  var curColors = localStorage.getItem("theme-colors");
  const colorsData = themeData.colors;
  const cntr = document.querySelector("main div");
  const part = cntr.getElementsByTagName("template")[0].content;
  for (var i = 0; i < colorsData.length; ++i) {
    var a = colorsData[i].split("#")
    a = a.filter((j) => { return j !== ""})
    for (let j = 0; j < a.length; ++j)
      a[j] = "#" + a[j]
    let clon = part.cloneNode(true)
    let chil = clon.children[0]
    cntr.appendChild(clon)
    chil.style.setProperty("--tmc", a[0])
    chil.style.setProperty("--tmcd", a[4])
    chil.value = colorsData[i]
    if (curColors === null && i === 0) chil.defaultChecked = true
    else if (curColors === colorsData[i]) chil.defaultChecked = true
  }
});
</script>
</html>

